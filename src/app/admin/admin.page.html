<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/login"></ion-back-button>
    </ion-buttons>
    <ion-title>Panel de Administración</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <!-- Formulario para agregar o editar un cómic -->
    <ion-row>
      <ion-col>
        <ion-card>
          <ion-card-header>
            <ion-card-title>{{ isEdit ? 'Editar Cómic' : 'Agregar Cómic' }}</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <form (ngSubmit)="onSubmit(comicForm)" #comicForm="ngForm">
              <ion-item>
                <ion-label position="floating">Título</ion-label>
                <ion-input type="text" name="title" [(ngModel)]="comic.title" required></ion-input>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Precio</ion-label>
                <ion-input type="number" name="price" [(ngModel)]="comic.price" required></ion-input>
              </ion-item>
              <div *ngIf="priceError" class="error-message" style="color: red;">{{ priceError }}</div>
              <ion-item>
                <ion-label position="floating">Imagen</ion-label>
                <img [src]="comic.image" *ngIf="comic.image" alt="{{ comic.title }}" style="width: 50px; height: 50px; margin-right: 10px;">
                <ion-button (click)="presentActionSheet()">Añadir Imagen</ion-button>
              </ion-item>
              <ion-item>
                <ion-label position="floating">Link</ion-label>
                <ion-input type="text" name="link" [(ngModel)]="comic.link" required></ion-input>
              </ion-item>
              <ion-button expand="full" type="submit" color="primary">{{ isEdit ? 'Actualizar Cómic' : 'Agregar Cómic' }}</ion-button>
            </form>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <!-- Lista de cómics con opciones para editar/eliminar -->
    <ion-row>
      <ion-col>
        <ion-list>
          <ion-item *ngFor="let comic of comics">
            <ion-thumbnail slot="start">
              <img [src]="comic.image" alt="{{ comic.title }}">
            </ion-thumbnail>
            <ion-label>
              <h2>{{ comic.title }}</h2>
              <p>{{ comic.price | currency }}</p>
            </ion-label>
            <ion-button slot="end" color="warning" (click)="editComic(comic)">Editar</ion-button>
            <ion-button slot="end" color="danger" (click)="confirmDelete(comic)">Eliminar</ion-button>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
